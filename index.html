<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>スポーツチャンバラメンシ動画検索</title>
    <style>
        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 600px;
            width: 100%;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #d32f2f;
        }
        input[type="text"] {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            margin-bottom: 20px;
        }
        input[type="text"]:focus {
            border-color: #d32f2f;
            outline: none;
        }
        ul { list-style: none; padding: 0; margin: 0; }
        li { border-bottom: 1px solid #eee; padding: 10px 0; }
        li:last-child { border-bottom: none; }
        a { text-decoration: none; color: #0066cc; font-weight: bold; display: block; }
        a:hover { text-decoration: underline; }
        .no-result { text-align: center; color: #777; margin-top: 10px; display: none; }
        .loading { text-align: center; color: #666; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="container">
    <h1>動画タイトル検索</h1>
    <input type="text" id="searchInput" placeholder="キーワードを入力（スペースで複数検索可）" disabled>
    
    <p id="loadingMessage" class="loading">最新のリストを読み込み中...</p>
    <ul id="resultList"></ul>
    <p class="no-result" id="noResult">一致する動画が見つかりませんでした。</p>
</div>

<script>
    const LIST_URL = "https://raw.githubusercontent.com/mokumokukairo/my-video-list/main/list.txt";
    
    const searchInput = document.getElementById('searchInput');
    const resultList = document.getElementById('resultList');
    const noResult = document.getElementById('noResult');
    const loadingMessage = document.getElementById('loadingMessage');

    let videoData = []; 

    //GitHub_get_data_function
    async function fetchVideoList() {
        try {
            const response = await fetch(LIST_URL + '?t=' + new Date().getTime());
            if (!response.ok) throw new Error("リストの読み込みに失敗しました");
            const text = await response.text();
            videoData = new Function("return [" + text + "]")();

            loadingMessage.style.display = 'none';
            searchInput.disabled = false;
            searchInput.placeholder = "キーワードを入力（スペースで複数検索可）";
            searchInput.focus();

        } catch (error) {
            console.error(error);
            loadingMessage.textContent = "リストの取得に失敗しました。";
            loadingMessage.style.color = "red";
        }
    }

    //list_view_function
    function displayList(videos) {
        resultList.innerHTML = '';
        
        if (videos.length === 0) {
            noResult.style.display = 'block';
            return;
        }

        noResult.style.display = 'none';
        videos.forEach(video => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = video.url;
            a.textContent = video.title;
            a.target = "_blank";
            li.appendChild(a);
            resultList.appendChild(li);
        });
    }

    //search_function
    searchInput.addEventListener('input', function() {
        const keywords = this.value.toLowerCase().split(/[\s　]+/).filter(k => k !== '');
        
        if (keywords.length === 0) {
            resultList.innerHTML = '';
            noResult.style.display = 'none';
            return;
        }

        //フィルタリングリング処理
        const filteredVideos = videoData.filter(video => {
            const title = video.title.toLowerCase();
            return keywords.every(word => title.includes(word));
        });

        displayList(filteredVideos);
    });

    fetchVideoList();

</script>

</body>
</html>